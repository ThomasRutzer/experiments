<div class="mntns">

    <div v-if="isActivated"
         class="mntns__infos revealing-content revealing-content--reveal">
        <landscape-legend></landscape-legend>
    </div>

    <div v-if="isActivated"
         class="mntns__progress revealing-content revealing-content--delayed-300 revealing-content--reveal">
      <level-progress></level-progress>
    </div>

    <div class="mntns__canvas">
        <generator :generator-id="mId"
                   @intersection="onIntersection($event)"
                   :data="data"></generator>
    </div>

    <transition name="mntns-label--show-transition">
        <div class="mntns__label mntns-label mntns-label--large-width"
             :class="{'mntns__label--outside': labelPos.outside}"
             :style="{left: labelPos.x + 'px', top: labelPos.y + 'px'}"
             v-if="extractedFocusData && !activeModal && labelPos.x && labelPos.y">

            <svg class="mntns-label__icon"
                 role="img">
                <use xlink:href="#icon-location"></use>
            </svg>

            <div class="mntns-label__content">
                <p class="text-color-highlight margin-vertical--none small-text-appearance">
                    {{level.title}}
                </p>
                <span>
                    {{ extractedFocusData.title }}
                </span>
            </div>
        </div>
    </transition>

    <modal :name="modalName">
        <template v-if="level && extractedFocusData"
                  slot="content">
            <div class="focus-data-details-data__content">
                <div class="focus-data-details-data__label mntns-label mntns-label--spacingless mntns-label--large-width">
                    <svg class="focus-data-details-data__icon mntns-label__icon mntns-label__icon--inverted"
                         role="img">
                        <use xlink:href="#icon-location"></use>
                    </svg>

                    <div class="mntns-label__content">
                        <p class="margin-vertical--none small-text-appearance">
                            {{level.title}}
                        </p>
                        <span>
                            {{ extractedFocusData.title }}
                        </span>
                    </div>
                </div>

                <div class="margin-top--m">
                    <a class="primary-button"
                       alt="view on Github"
                       :href="extractedFocusData.url">
                        view on Github
                    </a>
                </div>

                <div v-if="level.index == 1">
                    <div class="margin-top--s">
                        <a href="#"
                           alt="dig deeper!"
                           class="primary-button"
                           @click.prevent="forwards()">
                            Dig deeper
                        </a>
                    </div>
                </div>

                <div v-if="level.index == 2">
                    <a href="#" alt="Back to overview"
                       class="primary-button margin-top--s"
                       @click.prevent="back()">
                        Back to overview
                    </a>
                </div>
            </div>
        </template>
    </modal>
</div>
